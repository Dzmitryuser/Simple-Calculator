(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function c(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=c(o);fetch(o.href,r)}})();const s={logic:document.querySelector(".operations"),result:document.querySelector(".answer"),errorField:document.querySelector(".error-screen"),setLogicScreen(e){this.logic!==null&&(this.logic.textContent=e.join(""),this.resetErrorScreen())},setResultScreen(e){this.result!==null&&(this.result.textContent=String(e),this.resetErrorScreen())},setErrorScreen(e){this.errorField&&(this.errorField.classList.remove("nodisplay"),this.errorField.textContent=`Ошибка: ${e}`)},resetErrorScreen(){this.errorField&&(this.errorField.classList.add("nodisplay"),this.errorField.textContent="")}},t={logicContent:[],answerContent:0,validateExpression(e){const n=e.join("");if(n.trim()==="")return{isValid:!1,error:"Введите выражение"};if(!/^[\d+\-*/().\s]+$/.test(n))return{isValid:!1,error:"Недопустимые символы"};const c=n.replace(/[^()]/g,"");let i=0;for(const o of c)if(i+=o==="("?1:-1,i<0)break;return i!==0?{isValid:!1,error:"Несбалансированные скобки"}:/^[+*/]/.test(n)?{isValid:!1,error:"Оператор в начале"}:/[+\-*/]$/.test(n)?{isValid:!1,error:"Оператор в конце"}:/([+\-*/]{2,})/.test(n)?{isValid:!1,error:"Два оператора подряд"}:/(\.\d*\.|\.$)/.test(n)?{isValid:!1,error:"Некорректное число"}:/\/\s*0(?!\.)/.test(n)?{isValid:!1,error:"Деление на ноль"}:{isValid:!0}},pressCeButton(){this.logicContent.length=0,this.answerContent=0,s.setLogicScreen(this.logicContent),s.setResultScreen(this.answerContent),s.resetErrorScreen()},pressPercentButton(){const e=this.calculateLogic();e!==void 0&&(this.answerContent=e*100,s.setResultScreen(this.answerContent))},pressBracketOpenButton(){this.logicContent.push("("),s.setLogicScreen(this.logicContent)},pressBackspaseButton(){this.logicContent.pop(),s.setLogicScreen(this.logicContent)},pressSquareRootButton(){const e=this.calculateLogic();e!==void 0&&(this.answerContent=Math.sqrt(e),s.setResultScreen(this.answerContent))},pressSquareButton(){const e=this.calculateLogic();e!==void 0&&(this.answerContent=e*e,s.setResultScreen(this.answerContent))},pressBracketCloseButton(){this.logicContent.push(")"),s.setLogicScreen(this.logicContent)},pressDevideButton(){this.logicContent.push("/"),s.setLogicScreen(this.logicContent)},pressSevenButton(){this.logicContent.push("7"),s.setLogicScreen(this.logicContent)},pressEightButton(){this.logicContent.push("8"),s.setLogicScreen(this.logicContent)},pressNineButton(){this.logicContent.push("9"),s.setLogicScreen(this.logicContent)},pressMultiButton(){this.logicContent.push("*"),s.setLogicScreen(this.logicContent)},pressFourButton(){this.logicContent.push("4"),s.setLogicScreen(this.logicContent)},pressFiveButton(){this.logicContent.push("5"),s.setLogicScreen(this.logicContent)},pressSixButton(){this.logicContent.push("6"),s.setLogicScreen(this.logicContent)},pressMinusButton(){this.logicContent.push("-"),s.setLogicScreen(this.logicContent)},pressOneButton(){this.logicContent.push("1"),s.setLogicScreen(this.logicContent)},pressTwoButton(){this.logicContent.push("2"),s.setLogicScreen(this.logicContent)},pressThreeButton(){this.logicContent.push("3"),s.setLogicScreen(this.logicContent)},pressAddButton(){this.logicContent.push("+"),s.setLogicScreen(this.logicContent)},pressPlusMinusButton(){this.logicContent[0]!=="-"?this.logicContent=["-",...this.logicContent]:this.logicContent=this.logicContent.slice(1),s.setLogicScreen(this.logicContent)},presszeroButton(){this.logicContent.push("0"),s.setLogicScreen(this.logicContent)},pressdotButton(){this.logicContent.push("."),s.setLogicScreen(this.logicContent)},pressequalButton(){const e=this.calculateLogic();e!==void 0&&(this.answerContent=String(e),s.setResultScreen(this.answerContent))},calculateLogic(){let e=0;const n=this.validateExpression(this.logicContent);if(!n.isValid){s.setErrorScreen(n.error||"Ошибка");return}try{const c=this.logicContent.join(""),i=Function('"use strict"; return ('+c+")")();if(!isFinite(i)){s.setErrorScreen("Деление на ноль");return}e=i}catch{s.setErrorScreen("Что-то пошло не так")}return e}},l=document.querySelector(".keybord"),a=document.querySelector(".ce"),p=document.querySelector(".percent"),g=document.querySelector(".bracket-open"),h=document.querySelector(".back"),d=document.querySelector(".sq-root"),f=document.querySelector(".sq"),B=document.querySelector(".bracket-close"),S=document.querySelector(".dev"),C=document.querySelector(".seven"),y=document.querySelector(".eight"),m=document.querySelector(".nine"),q=document.querySelector(".multi"),k=document.querySelector(".four"),L=document.querySelector(".five"),w=document.querySelector(".six"),E=document.querySelector(".minus"),F=document.querySelector(".one"),b=document.querySelector(".two"),x=document.querySelector(".three"),O=document.querySelector(".add"),M=document.querySelector(".plus-minus"),V=document.querySelector(".zero"),P=document.querySelector(".dot"),R=document.querySelector(".equal");l&&l.addEventListener("click",e=>{e.target===a?t.pressCeButton():e.target===p?t.pressPercentButton():e.target===g?t.pressBracketOpenButton():e.target===h?t.pressBackspaseButton():e.target===d?t.pressSquareRootButton():e.target===f?t.pressSquareButton():e.target===B?t.pressBracketCloseButton():e.target===S?t.pressDevideButton():e.target===C?t.pressSevenButton():e.target===y?t.pressEightButton():e.target===m?t.pressNineButton():e.target===q?t.pressMultiButton():e.target===k?t.pressFourButton():e.target===L?t.pressFiveButton():e.target===w?t.pressSixButton():e.target===E?t.pressMinusButton():e.target===F?t.pressOneButton():e.target===b?t.pressTwoButton():e.target===x?t.pressThreeButton():e.target===O?t.pressAddButton():e.target===M?t.pressPlusMinusButton():e.target===V?t.presszeroButton():e.target===P?t.pressdotButton():e.target===R&&t.pressequalButton()});document.addEventListener("keydown",e=>{e.key==="7"?t.pressSevenButton():e.key==="8"?t.pressEightButton():e.key==="9"?t.pressNineButton():e.key==="4"?t.pressFourButton():e.key==="5"?t.pressFiveButton():e.key==="6"?t.pressSixButton():e.key==="1"?t.pressOneButton():e.key==="2"?t.pressTwoButton():e.key==="3"?t.pressThreeButton():e.key==="0"?t.presszeroButton():e.key==="+"?t.pressAddButton():e.key==="-"?t.pressMinusButton():e.key==="*"?t.pressMultiButton():e.key==="/"?t.pressDevideButton():e.key==="Enter"?t.pressequalButton():e.key==="Escape"?t.pressCeButton():e.key==="Backspace"?t.pressBackspaseButton():e.key===")"?t.pressBracketCloseButton():e.key==="("?t.pressBracketOpenButton():e.key==="%"&&t.pressPercentButton()});
